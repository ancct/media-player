var MediaPlayer=function(){"use strict";function D(n,l,e,a){var t=void 0!==n.onpointerup,r=void 0!==n.ontouchstart,i=t?"pointerdown":r?"touchstart":"mousedown",o=t?"pointermove":r?"touchmove":"mousemove",u=t?"pointerup":r?"touchend":"mouseup",c=/^(ltr|rtl)$/i.test(e),s=/^(ltr|ttb)$/i.test(e),m=c?"clientX":"clientY",d=void 0,v=void 0,f=void 0;function p(e){e.preventDefault();var t=m in e?e[m]:e.touches&&e.touches[0]&&e.touches[0][m]||0;a((s?t-v:f-t)/(f-v))}function h(){d.removeEventListener(o,p),d.removeEventListener(u,h)}n.addEventListener(i,function(e){d=n.ownerDocument.defaultView;var t=l.getBoundingClientRect();v=c?t.left:t.top,f=c?t.right:t.bottom,p(e),d.addEventListener(o,p),d.addEventListener(u,h)})}function R(e){return("0"+Math.floor(e/60)).slice(-2)+":"+("0"+Math.floor(e%60)).slice(-2)}function L(e,t,n){return Math.floor(e/60)+" "+t+", "+Math.floor(e%60)+" "+n}function N(e){var t=e instanceof Node?e:document.createElement(e),n=[].slice.call(arguments,1);for(var l in n)if(n[l]instanceof Node)t.appendChild(n[l]);else if(Object(n[l])===n[l])for(var a in n[l])"function"==typeof n[l][a]?t.addEventListener(a,n[l][a]):t.setAttribute(a,n[l][a]);return t}function $(e,t,n){var l="http://www.w3.org/2000/svg",a=document.createElementNS(l,"use");return a.setAttributeNS("http://www.w3.org/1999/xlink","href",t[n]||"#symbol-"+n),N(document.createElementNS(l,"svg"),{class:e+"-symbol "+e+"-"+n+"-symbol",role:"presentation"},a)}function q(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!0,!0,void 0),e.dispatchEvent(n)}return function(r,e){var a=this,t=Object(e),n=t.prefix||"media",i=Object(t.lang),l=Object(t.svgs),o=t.timeDir||"ltr",u=t.volumeDir||"ltr",c=r.ownerDocument;a.media=N(r,{canplaythrough:S,loadstart:T,loadeddata:function(){w()},pause:g,play:g,timeupdate:w,volumechange:F}),a.playSymbol=$(n,l,"play"),a.pauseSymbol=$(n,l,"pause"),a.play=N("button",{class:n+"-control "+n+"-play",click:k,keydown:M},a.playSymbol,a.pauseSymbol),a.timeMeter=N("span",{class:n+"-meter "+n+"-time-meter"}),a.timeRange=N("span",{class:n+"-range "+n+"-time-range"},a.timeMeter),a.time=N("button",{class:n+"-slider "+n+"-time",role:"slider","aria-label":i.currentTime||"current time","data-dir":o,click:function(e){e.pointerType||e.detail||k(e)},keydown:M},a.timeRange),a.currentTimeText=c.createTextNode(""),a.currentTime=N("span",{class:n+"-text "+n+"-current-time",role:"timer","aria-label":i.currentTime||"current time"},a.currentTimeText),a.remainingTimeText=c.createTextNode(""),a.remainingTime=N("span",{class:n+"-text "+n+"-remaining-time",role:"timer","aria-label":i.remainingTime||"remaining time"},a.remainingTimeText),a.muteSymbol=$(n,l,"mute"),a.unmuteSymbol=$(n,l,"unmute"),a.mute=N("button",{class:n+"-control "+n+"-mute",click:E,keydown:C},a.muteSymbol,a.unmuteSymbol),a.volumeMeter=N("span",{class:n+"-meter "+n+"-volume-meter"}),a.volumeRange=N("span",{class:n+"-range "+n+"-volume-range"},a.volumeMeter),a.volume=N("button",{class:n+"-slider "+n+"-volume",role:"slider","aria-label":i.volume||"volume","data-dir":u,click:function(e){e.pointerType||e.detail||E(e)},keydown:C},a.volumeRange),a.downloadSymbol=$(n,l,"download"),a.download=N("button",{class:n+"-control "+n+"-download","aria-label":i.download||"download",click:function(){var e=c.head.appendChild(N("a",{download:"",href:r.src}));e.click(),c.head.removeChild(e)}},a.downloadSymbol),a.enterFullscreenSymbol=$(n,l,"enterFullscreen"),a.leaveFullscreenSymbol=$(n,l,"leaveFullscreen"),a.fullscreen=N("button",{class:n+"-control "+n+"-fullscreen",click:function(){v?s===d()?f().call(c):(v.call(s),a.fullscreen.focus(),setTimeout(function(){a.fullscreen.focus()},200)):r.webkitSupportsFullscreen&&(r.webkitDisplayingFullscreen?r.webkitExitFullscreen():r.webkitEnterFullscreen(),x())}},a.enterFullscreenSymbol,a.leaveFullscreenSymbol),a.toolbar=N("div",{class:n+"-toolbar",role:"toolbar","aria-label":i.player||"media player"},a.play,a.mute,a.volume,a.currentTime,a.time,a.remainingTime,a.download,a.fullscreen);var s=a.player=N("div",{class:n+"-player",role:"region","aria-label":i.player||"media player"},a.toolbar),m=a._fullscreenchange="onfullscreenchange"in s?"fullscreenchange":"onwebkitfullscreenchange"in s?"webkitfullscreenchange":"onmozfullscreenchange"in s?"mozfullscreenchange":"onMSFullscreenChange"in s?"MSFullscreenChange":"fullscreenchange",d=a._fullscreenElement=function(){return c.fullscreenElement||c.webkitFullscreenElement||c.mozFullScreenElement||c.msFullscreenElement},v=a._requestFullscreen=s.requestFullscreen||s.webkitRequestFullscreen||s.mozRequestFullScreen||s.msRequestFullscreen,f=a._exitFullscreen=function(){return c.exitFullscreen||c.webkitCancelFullScreen||c.mozCancelFullScreen||c.msExitFullscreen};c.addEventListener(m,x),N(r,{class:n+"-media",playsinline:"","webkit-playsinline":"",role:"img",tabindex:-1}).controls=!1,r.parentNode&&s.insertBefore(r.parentNode.replaceChild(s,r),a.toolbar);var p=void 0,h=void 0,y=void 0,b=void 0;function g(){p!==r.paused&&(p=r.paused,N(a.play,{"aria-label":p?i.play||"play":i.pause||"pause"}),N(a.playSymbol,{"aria-hidden":!p}),N(a.pauseSymbol,{"aria-hidden":p}),clearInterval(b),p||(b=setInterval(w,34)),q(r,"playchange"))}function w(){if(h!==r.currentTime||y!==r.duration){h=r.currentTime,y=r.duration||0;var e=h/y,t=R(h),n=R(y-Math.floor(h));t!==a.currentTimeText.nodeValue&&(a.currentTimeText.nodeValue=t,N(a.currentTime,{title:""+L(h,i.minutes||"minutes",i.seconds||"seconds")})),n!==a.remainingTimeText.nodeValue&&(a.remainingTimeText.nodeValue=n,N(a.remainingTime,{title:""+L(y-h,i.minutes||"minutes",i.seconds||"seconds")})),N(a.time,{"aria-valuenow":h,"aria-valuemin":0,"aria-valuemax":y});var l=/^(ltr|rtl)$/i.test(o)?"width":"height";a.timeMeter.style[l]=100*e+"%",q(r,"timechange")}}function T(){r.removeEventListener("canplaythrough",S),N(r,{canplaythrough:S}),N(a.download,{href:r.src,download:r.src}),g(),F(),x(),w()}function S(){r.removeEventListener("canplaythrough",S),q(r,"canplaystart"),p&&!r.autoplay||r.play()}function F(){var e=r.muted?0:r.volume,t=!e;N(a.volume,{"aria-valuenow":e,"aria-valuemin":0,"aria-valuemax":1});var n=/^(ltr|rtl)$/i.test(u)?"width":"height";a.volumeMeter.style[n]=100*e+"%",N(a.mute,{"aria-label":t?i.unmute||"unmute":i.mute||"mute"}),N(a.muteSymbol,{"aria-hidden":t}),N(a.unmuteSymbol,{"aria-hidden":!t})}function x(){var e=s===d();N(a.fullscreen,{"aria-label":e?i.leaveFullscreen||"leave full screen":i.enterFullscreen||"enter full screen"}),N(a.enterFullscreenSymbol,{"aria-hidden":e}),N(a.leaveFullscreenSymbol,{"aria-hidden":!e})}function k(e){e.preventDefault(),r[r.paused?"play":"pause"]()}function E(e){e.preventDefault(),r.muted=!r.muted}function M(e){var t=e.keyCode,n=e.shiftKey;if(37<=t&&t<=40){e.preventDefault();var l=/^(btt|ltr)$/.tests(o),a=37===t||39===t?t-38:t-39;r.currentTime=Math.max(0,Math.min(y,h+a*(l?1:-1)*(n?10:1))),w()}}function C(e){var t=e.keyCode,n=e.shiftKey;if(37<=t&&t<=40){e.preventDefault();var l=/^(btt|ltr)$/.tests(u),a=37===t||39===t?t-38:l?39-t:t-39;r.volume=Math.max(0,Math.min(1,r.volume+a*(l?.1:-.1)*(n?1:.2)))}}D(a.time,a.timeRange,o,function(e){r.currentTime=y*Math.max(0,Math.min(1,e)),w()}),D(a.volume,a.volumeRange,u,function(e){r.volume=Math.max(0,Math.min(1,e))}),T()}}();
//# sourceMappingURL=media-player.js.map
